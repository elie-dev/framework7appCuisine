<template>
    <div class="page" data-name="catalog-category">
      <div class="navbar">
        <div class="navbar-bg"></div>
        <div class="navbar-inner sliding">
          <div class="title">
            
          </div>
        </div>
      </div>
      
      <div class="page-content list-recipe">
        hello la mif
      </div>
    </div>
  </template>


  <script>
    // AFFICHER LE NOM DE LA CATEGORIE + PLAT ASSOCIER
    export default (props, { }) => {

      let categories  = []
      let recipes  = []

      app.on('pageInit', function (page) {
          var index = page.route.params.index;    
          $('.title').append(`<div> Category `+ index +`</div>`) 


      app.request.get('https://www.themealdb.com/api/json/v1/1/filter.php?c=' + index, function (data) {
      data = JSON.parse(data);
      console.log(data)
      recipes = data.meals;
      
      recipes.forEach(function(recipe){
        console.log(recipe)
        $('.list-recipe').append(`
        <div class="card card-expandable categorie" categorie=` + recipe.strMeal + `>
          <!-- card content -->
          <div class="card-content padding">
            <h2 class="title">` + recipe.strMeal + `</h2>
            <img src="`+ recipe.strMealThumb + `" />
            <a href="/catalog-category/`+  +`" class="link card-close card-opened-fade-in color-red" style="position: absolute; right: 15px; top: 15px">
              <i class="icon f7-icons">xmark_circle_fill</i>
            </a>
            
            <div class="list">
              <div class="list-group">
                <ul>
                  <li class="list-group-title">Recettes lié à la catégorie</li>
                  <li class="item-content">Recette un</li>
                  <li class="item-content">Recette deux</li>
                </ul>
              </div>
            </div>  
             <!-- put all content here -->
          </div>
        </div>`)
      });
    });
  });
      return $render;
    }
  
  </script>
  